/* Form Submission Validation (IE 9+) https://github.com/davidbowland/form-submit */"use strict";var formSubmit=new function(){var b=this,y=0,m={},t={},z={m:"(1[0-2]|0?[1-9])",mm:"(0[1-9]|1[0-2])",d:"([12]\\d|3[01]|0?[1-9])",dd:"(0[1-9]|[12]\\d|3[01])",yy:"(\\d\\d)",yyyy:"((?:19|20)\\d\\d)",H:"(1[0-2]|0?[1-9])",HH:"(0[1-9]|1[0-2])",H24:"(1\\d|2[0-3]|0?\\d)",HH24:"(0\\d|1\\d|2[0-3])",M:"((?:0|[1-5])?\\d)",MM:"([0-5]\\d)",S:"((?:0|[1-5])?\\d)",SS:"([0-5]\\d)",MS:"(\\d{1,6})"},A={0:"\\d",9:"[1-9]"},u={digits:"0",number:"0.0",currency:"0.00",phone:"(000)000-0000",zip:"00000",email:"user@domain.com",
timestamp:"mm/dd/yyyy hh:mm:ss.ms","date-mmddyyyy":"mm/dd/yyyy","date-yyyymmdd":"yyyy-mm-dd",time:"hh:mm"};b.addValidation=function(a,c){q(a,b.addValidationSingleElement,c);return b};b.addValidationSingleElement=function(a,c){b.removeValidationSingleElement(a);m[p(a)]=c;a.addEventListener("change",r);a.addEventListener("blur",r);var e=a.form;e in t||!e||(t[p(e)]=!0,e.addEventListener("submit",v));return b};b.removeValidation=function(a){q(a,b.removeValidationSingleElement);return b};b.removeValidationSingleElement=
function(a){a.removeEventListener("change",r);a.removeEventListener("blur",r);delete m[p(a)];a:{var c=a.form,e;if(c){for(e in m){var d=m[e];if(d.form==c)break a}c.removeEventListener("submit",v);delete t[p(c)]}}b.removeErrorMessage(a);return b};b.addRadioValidation=function(a,c){for(var e=a.form.querySelectorAll('[name="'+a.name+'"]'),d,f=0;d=e[f];f++)b.addValidationSingleElement(d,c);return b};b.removeRadioValidation=function(a,c){for(var e=a.form.querySelectorAll('[name="'+a.name+'"]'),d,f=0;d=
e[f];f++)b.removeValidationSingleElement(d,c);return b};b.getErrorMessage=function(a){var c=m[p(a)],b=a.value,d,f=a.type.toLowerCase();"radio"==f?b=(d=a.form.querySelector('[name="'+a.name+'"]:checked'))?d.value:void 0:"checkbox"==f?b=a.checked:"SELECT"==a.tagName.toUpperCase()&&(b=a.querySelector(":checked").value);if(c)return c(b,a)};b.isValid=function(a){return!b.getErrorMessage(a)};b.displayErrorMessage=function(a,c){b.removeErrorMessage(a);b.getErrorMessageElement(a).textContent=c;return b};
b.removeErrorMessage=function(a){b.getErrorMessageElement(a).textContent="";return b};b.getErrorMessageElement=function(a){var b=document.querySelector('[data-form-submit-error-for="'+(a.getAttribute("data-form-submit-group")||a.id||a.name)+'"]');if(!b){b=document.createElement("span");b.className="form-submit-error";b.setAttribute("data-form-submit-error-for",a.id||a.name);if("radio"==a.type.toLowerCase()){var e=a.form.querySelectorAll('[name="'+a.name+'"]');e=e[e.length-1].nextElementSibling}else e=
a.nextElementSibling;a.parentElement.insertBefore(b,e)}return b};b.addCounter=function(a,c){q(a,b.addCounterSingleElement,c);return b};b.addCounterSingleElement=function(a,c){b.removeCounterSingleElement(a);void 0!==c?a.setAttribute("data-form-submit-count",c):isNaN(parseInt(a.getAttribute("data-form-submit-count")))&&a.setAttribute("data-form-submit-count",a.getAttribute("maxlength"));a.addEventListener("input",k);a.addEventListener("keypress",k);a.addEventListener("change",k);a.addEventListener("blur",
k);k({currentTarget:a});return b};b.removeCounter=function(a){q(a,b.removeCounterSingleElement);return b};b.removeCounterSingleElement=function(a){a.removeEventListener("input",k);a.removeEventListener("keypress",k);a.removeEventListener("change",k);a.removeEventListener("blur",k);b.getCounterElement(a).textContent="";return b};b.getCounterElement=function(a){var b=document.querySelector('[data-form-submit-counter-for="'+(a.getAttribute("data-form-submit-group")||a.id||a.name)+'"]');b||(b=document.createElement("span"),
b.className="form-submit-counter",b.setAttribute("data-form-submit-counter-for",a.id||a.name),a.parentElement.insertBefore(b,a.nextSibling));return b};b.unload=function(){var a,c,e=document.querySelectorAll("data-form-submit-count");for(c in m)b.removeValidation(m[c]);for(c=0;a=e[c];c++)b.removeCounter(a);return b};b.validation=new function(){var a=this;a.isDigits=function(a){return 0<=a.search(/^\d+$/)};a.isNumber=function(a){return 0<=a.search(/^\-?((\d{1,3}(,?\d{3})*)\.?\d*|(\d{1,3}(,?\d{3})*)?\.\d+)$/)};
a.isCurrency=function(a){return 0<=a.search(/^\-?((\d{1,3}(,?\d{3})*)?\.\d\d)$/)};a.isPhone=function(a,b,c){b=(b||"(000)000-0000").replace(/0|9|.+?/g,function(a){return A[a]||(c?"\\D*?":a.replace(/(\W)/g,"\\$1"))});return(new RegExp("^"+b+"$")).test(a)};a.isZip=function(a){return 0<=a.search(/^\d{5}$/)};a.isEmail=function(a){return 0<=a.search(/^.+@([a-z0-9]([a-z0-9-]*[a-z0-9])*\.)+[a-z]+$/i)};a.isTimestamp=function(a,b,c){return e(b||"mm/dd/yyyy HH:MM:SS.MS",c).test(a)};a.isDate=function(b,c,l){return a.isTimestamp(b,
c||"mm/dd/yyyy",l)};a.isTime=function(b,c,l){return a.isTimestamp(b,c||"HH24:MM",l)};a.formatDigits=function(a,b){var c=a.match(/\d/g)||[],d;return void 0!==b&&a?b.replace(/\d/g,function(a,b){if(c.length)return c.shift();void 0===d&&(d=b);return""}).slice(0,d):c.join("")};a.formatNumber=function(a){var c=0,d=0<=a.indexOf("-")?"-":"";return b(d+a.replace(/\D/g,function(a){return"."==a&&1==++c?".":""}))};a.formatCurrency=function(c){return(c=a.formatNumber(c))?b(parseFloat(c.replace(/,/g,"")).toFixed(2)):
c};a.formatPhone=function(b,c){return a.formatDigits(b,c||"(000)000-0000")};a.formatZip=function(b,c){return a.formatDigits(b,c||"00000")};a.formatTimestamp=function(a,b){var c,d={},f=void 0;b=b||"mm/dd/yyyy HH:MM:SS.MS";if(!a)return"";if(c=e(b.replace(/mm|dd|HH|MM|SS/g,function(a){return a.slice(Math.floor(a.length/-2))}),!0,!0).exec(a)){var k=b.match(/mm|m|dd|d|yyyy|yy|HH|H|MS|MM|M|SS|S/g);c.shift();for(var g,h=0;g=c[h];h++)0<="mm dd HH24 HH MM SS".split(" ").indexOf(k[h])&&(g=("00"+g).slice(-2)),
d[k[h]]=g}else{if(c=a.match(/(?:^|\D)(1[0-2]|0?[1-9])([\\/-]?)([12]\d|3[01]|0?[1-9])(\2)((?:19|20)?\d\d)(?:\D|$)/))d.m=c[1],d.d=c[3],d.yy=c[5];else if(c=a.match(/(?:^|\D)((?:19|20)?\d\d)([\\/-]?)(1[0-2]|0?[1-9])(\2)([12]\d|3[01]|0?[1-9])(?:\D|$)/))d.yy=c[1],d.m=c[3],d.d=c[5];if(c&&(c=a.slice(c[0].length).match(/(?:^|\D)(1\d|2[0-3]|0?\d)[\.:]?((?:0|[1-5])?\d)(?:[\.:]?((?:0|[1-5])?\d)(?:[\.:]?(\d{1,6}))?)?(?:\D|$)/)))d.H=c[1],d.M=c[2],d.S=c[3],d.MS=c[4];else if(c=a.match(/(?:^|\D)(1\d|2[0-3]|0?\d)[\.:]?((?:0|[1-5])?\d)(?:[\.:]?((?:0|[1-5])?\d)(?:[\.:]?(\d{1,6}))?)?(?:\D|$)/))d.H=
c[1],d.M=c[2],d.S=c[3],d.MS=c[4]}["m","d","H","M","S"].forEach(function(a){var b=d[a];b&&(d[a]=b.match(/^0*(\d+)$/)[1],d[a+a]=("0"+b).slice(-2))});d.yy&&(4==d.yy.length?(d.yyyy=d.yy,d.yy=d.yy.slice(-2)):d.yyyy=50>d.yy?"20"+d.yy:"19"+d.yy);d.H&&(a.match(/p(\.?m)?/i)?d.H24=d.HH24=(parseInt(d.H)+12).toString():(d.H24=d.H,d.HH24=d.HH));return b.replace(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S/g,function(a,b){if(d[a])return d[a];void 0===f&&(f=b);return""}).slice(0,f)||a};a.formatDate=function(b,
c){return a.formatTimestamp(b,c||"mm/dd/yyyy")};a.formatTime=function(b,c){return a.formatTimestamp(b,c||"HH24:MM")};var b=function(a){a=a.match(/^([^\.]*)(\.?)([^\.]*)$/).slice(1);a[0]=a[0].replace(/\B(?=(?:\d{3})+\b)/g,",");return a.join("")},e=function(a,b,c){var d="",e="",f,l;if(c&&(f=a.match(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S/g)))for(d="(?:",c=0;f[c];c++)e+=")?";return new RegExp("^"+a.replace(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S|.+?/g,function(a){return(l=z[a])?d+l:b?"\\D?":
a.replace(/(\W)/g,"\\$1")})+e+"$")}};var q=function(a,b){var c=Array.prototype.slice.call(arguments,2);"string"===typeof a?a=document.querySelectorAll(a):a.nodeType&&(a=[a]);for(var d=0,f;f=a[d];d++)b.apply(null,[f].concat(c))},p=function(a){var b=parseInt(a.getAttribute("data-form-submit-id"));isNaN(b)&&a.setAttribute("data-form-submit-id",b=y++);return b},v=function(a){var c=a.currentTarget.querySelectorAll("[name]"),e=!0,d=a.currentTarget.getAttribute("data-form-submit-always-allow");if(d&&"false"!=
d.toLowerCase())return!0;for(var f,l=0;d=c[l];l++)if(f=b.getErrorMessage(d))b.displayErrorMessage(d,f),e&&(e=!1,d.focus());e||a.preventDefault();return e},r=function(a){var c;(c=b.getErrorMessage(a.currentTarget))?b.displayErrorMessage(a.currentTarget,c):b.removeErrorMessage(a.currentTarget)},k=function(a){var c=b.getCounterElement(a.currentTarget),e=a.currentTarget.getAttribute("data-form-submit-count");a.currentTarget.value=a.currentTarget.value.slice(0,parseInt(e));c.textContent=a.currentTarget.value.length+
"/"+e},n=function(a){return a.getAttribute("data-form-submit-error-msg")||"Invalid input"},g=function(a,c,e,d){b.addValidationSingleElement(a,function(a,b){return c(b.value=e(a,d),d)?"":n(b)})},h=function(a,c,e,d){b.addValidationSingleElement(a,function(a,b){return!c(b.value=e(a,d),d)&&b.value.length?n(b):""})},w=function(a,b){null===a.getAttribute("placeholder")&&a.setAttribute("placeholder",b)},x=function(a){var c,e,d,f;a=document.querySelectorAll("[data-form-submit-required]");for(e=0;c=a[e];e++)if(d=
c.getAttribute("data-form-submit-required"))switch(d=String(d).toLowerCase(),(f=u[d])&&w(c,f),d){case "digits":g(c,b.validation.isDigits,b.validation.formatDigits);break;case "number":g(c,b.validation.isNumber,b.validation.formatNumber);break;case "currency":g(c,b.validation.isCurrency,b.validation.formatCurrency);break;case "phone":g(c,b.validation.isPhone,b.validation.formatPhone);break;case "zip":g(c,b.validation.isZip,b.validation.formatZip);break;case "email":b.addValidation(c,function(a,c){return b.validation.isEmail(a)?
"":n(c)});break;case "timestamp":g(c,b.validation.isTimestamp,b.validation.formatTimestamp);break;case "date-mmddyyyy":g(c,b.validation.isDate,b.validation.formatDate);break;case "date-yyyymmdd":g(c,b.validation.isDate,b.validation.formatDate,"yyyy-mm-dd");break;case "time":g(c,b.validation.isTime,b.validation.formatTime);break;case "radio":b.addRadioValidation(c,function(a,b){var c;return void 0===a?(c=b.form.querySelector('[name="'+b.name+'"][data-form-submit-error-msg]'))?c.getAttribute("data-form-submit-error-msg"):
"Invalid input":""});break;case "false":break;default:b.addValidation(c,function(a,b){return a?"":n(b)})}a=document.querySelectorAll("[data-form-submit-optional]");for(e=0;c=a[e];e++)if(d=c.getAttribute("data-form-submit-optional"))switch(d=String(d).toLowerCase(),(f=u[d])&&w(c,f),d){case "digits":h(c,b.validation.isDigits,b.validation.formatDigits);break;case "number":h(c,b.validation.isNumber,b.validation.formatNumber);break;case "currency":h(c,b.validation.isCurrency,b.validation.formatCurrency);
break;case "phone":h(c,b.validation.isPhone,b.validation.formatPhone);break;case "zip":h(c,b.validation.isZip,b.validation.formatZip);break;case "email":b.addValidation(c,function(a,c){return!a||b.validation.isEmail(a)?"":n(c)});break;case "timestamp":h(c,b.validation.isTimestamp,b.validation.formatTimestamp);break;case "date-mmddyyyy":h(c,b.validation.isDate,b.validation.formatDate);break;case "date-yyyymmdd":h(c,b.validation.isDate,b.validation.formatDate,"yyyy-mm-dd");break;case "time":h(c,b.validation.isTime,
b.validation.formatTime);break;case "false":break;default:console.log("data-form-submit-optional invalid: "+c.getAttribute("data-form-submit-optional"))}a=document.querySelectorAll("[data-form-submit-regex]");for(e=0;c=a[e];e++)b.addValidation(c,function(a,b){try{var c=new RegExp("^"+b.getAttribute("data-form-submit-regex").match(/^\^*(.*?)\$*$/)[1]+"$")}catch(B){throw console.log("data-form-submit-regex invalid: "+b.getAttribute("data-form-submit-regex")),B;}return c.test(a)?"":n(b)});a=document.querySelectorAll("[data-form-submit-count]");
for(e=0;c=a[e];e++)f=c.getAttribute("data-form-submit-count"),"true"!=f&&isNaN(parseInt(f))&&console.log("data-form-submit-count invalid: "+c.getAttribute("data-form-submit-count")),b.addCounterSingleElement(c)};document.addEventListener("DOMContentLoaded",x,!0);"complete"==document.readyState&&x()};