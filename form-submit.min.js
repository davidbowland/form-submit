/* Form Submission Validation (IE 9+) https://github.com/davidbowland/form-submit */"use strict";var formSubmit=new function(){var b=this,z=0,m={},u={},A={m:"(1[0-2]|0?[1-9])",mm:"(0[1-9]|1[0-2])",d:"([12]\\d|3[01]|0?[1-9])",dd:"(0[1-9]|[12]\\d|3[01])",yy:"(\\d\\d)",yyyy:"((?:19|20)\\d\\d)",H:"(1[0-2]|0?[1-9])",HH:"(0[1-9]|1[0-2])",H24:"(1\\d|2[0-3]|0?\\d)",HH24:"(0\\d|1\\d|2[0-3])",M:"((?:0|[1-5])?\\d)",MM:"([0-5]\\d)",S:"((?:0|[1-5])?\\d)",SS:"([0-5]\\d)",MS:"(\\d{0,6}?)"},B={0:"\\d",9:"[1-9]"},v={digits:"0",number:"0.0",currency:"0.00",phone:"(000)000-0000",zip:"00000",email:"user@domain.com",
timestamp:"mm/dd/yyyy hh:mm:ss.ms","date-mmddyyyy":"mm/dd/yyyy","date-yyyymmdd":"yyyy-mm-dd",time:"hh:mm"};b.addValidation=function(a,c){r(a,b.addValidationSingleElement,c);return b};b.addValidationSingleElement=function(a,c){b.removeValidationSingleElement(a);m[q(a)]=c;a.addEventListener("change",t);a.addEventListener("blur",t);var e=a.form;e in u||!e||(u[q(e)]=!0,e.addEventListener("submit",w));return b};b.removeValidation=function(a){r(a,b.removeValidationSingleElement);return b};b.removeValidationSingleElement=
function(a){a.removeEventListener("change",t);a.removeEventListener("blur",t);delete m[q(a)];a:{var c=a.form,e;if(c){for(e in m){var f=m[e];if(f.form==c)break a}c.removeEventListener("submit",w);delete u[q(c)]}}b.removeErrorMessage(a);return b};b.addRadioValidation=function(a,c){for(var e=a.form.querySelectorAll('[name="'+a.name+'"]'),f,g=0;f=e[g];g++)b.addValidationSingleElement(f,c);return b};b.removeRadioValidation=function(a,c){for(var e=a.form.querySelectorAll('[name="'+a.name+'"]'),f,g=0;f=
e[g];g++)b.removeValidationSingleElement(f,c);return b};b.getErrorMessage=function(a){var c=m[q(a)],b=a.value,f,g=a.type.toLowerCase();"radio"==g?b=(f=a.form.querySelector('[name="'+a.name+'"]:checked'))?f.value:void 0:"checkbox"==g?b=a.checked:"SELECT"==a.tagName.toUpperCase()&&(b=a.querySelector(":checked").value);if(c)return c(b,a)};b.isValid=function(a){return!b.getErrorMessage(a)};b.displayErrorMessage=function(a,c){b.removeErrorMessage(a);b.getErrorMessageElement(a).textContent=c;return b};
b.removeErrorMessage=function(a){b.getErrorMessageElement(a).textContent="";return b};b.getErrorMessageElement=function(a){var b=document.querySelector('[data-form-submit-error-for="'+(a.getAttribute("data-form-submit-group")||a.id||a.name)+'"]');if(!b){b=document.createElement("span");b.className="form-submit-error";b.setAttribute("data-form-submit-error-for",a.id||a.name);if("radio"==a.type.toLowerCase()){var e=a.form.querySelectorAll('[name="'+a.name+'"]');e=e[e.length-1].nextElementSibling}else e=
a.nextElementSibling;a.parentElement.insertBefore(b,e)}return b};b.addCounter=function(a,c){r(a,b.addCounterSingleElement,c);return b};b.addCounterSingleElement=function(a,c){b.removeCounterSingleElement(a);void 0!==c?a.setAttribute("data-form-submit-count",c):isNaN(parseInt(a.getAttribute("data-form-submit-count")))&&a.setAttribute("data-form-submit-count",a.getAttribute("maxlength"));a.addEventListener("input",k);a.addEventListener("keypress",k);a.addEventListener("change",k);a.addEventListener("blur",
k);k({currentTarget:a});return b};b.removeCounter=function(a){r(a,b.removeCounterSingleElement);return b};b.removeCounterSingleElement=function(a){a.removeEventListener("input",k);a.removeEventListener("keypress",k);a.removeEventListener("change",k);a.removeEventListener("blur",k);b.getCounterElement(a).textContent="";return b};b.getCounterElement=function(a){var b=document.querySelector('[data-form-submit-counter-for="'+(a.getAttribute("data-form-submit-group")||a.id||a.name)+'"]');b||(b=document.createElement("span"),
b.className="form-submit-counter",b.setAttribute("data-form-submit-counter-for",a.id||a.name),a.parentElement.insertBefore(b,a.nextSibling));return b};b.unload=function(){var a,c,e=document.querySelectorAll("data-form-submit-count");for(c in m)b.removeValidation(m[c]);for(c=0;a=e[c];c++)b.removeCounter(a);return b};b.validation=new function(){var a=this;a.isDigits=function(a){return 0<=a.search(/^\d+$/)};a.isNumber=function(a){return 0<=a.search(/^\-?((\d{1,3}(,?\d{3})*)\.?\d*|(\d{1,3}(,?\d{3})*)?\.\d+)$/)};
a.isCurrency=function(a){return 0<=a.search(/^\-?((\d{1,3}(,?\d{3})*)?\.\d\d)$/)};a.isPhone=function(a,b,c){b=(b||"(000)000-0000").replace(/0|9|.+?/g,function(a){return B[a]||(c?"\\D*?":a.replace(/(\W)/g,"\\$1"))});return(new RegExp("^"+b+"$")).test(a)};a.isZip=function(a){return 0<=a.search(/^\d{5}$/)};a.isEmail=function(a){return 0<=a.search(/^.+@([a-z0-9]([a-z0-9-]*[a-z0-9])*\.)+[a-z]+$/i)};a.isTimestamp=function(a,b,c){return e(b||"mm/dd/yyyy HH24:MM:SS.MS",c).test(a)};a.isDate=function(b,c,n){return a.isTimestamp(b,
c||"mm/dd/yyyy",n)};a.isTime=function(b,c,n){return a.isTimestamp(b,c||"HH24:MM",n)};a.formatDigits=function(a,b){var c=a.match(/\d/g)||[],d;return void 0!==b&&a?b.replace(/\d/g,function(a,b){if(c.length)return c.shift();void 0===d&&(d=b);return""}).slice(0,d):c.join("")};a.formatNumber=function(a){var c=0,f=0<=a.indexOf("-")?"-":"";return b(f+a.replace(/\D/g,function(a){return"."==a&&1==++c?".":""}))};a.formatCurrency=function(c){return(c=a.formatNumber(c))?b(parseFloat(c.replace(/,/g,"")).toFixed(2)):
c};a.formatPhone=function(b,c){return a.formatDigits(b,c||"(000)000-0000")};a.formatZip=function(b,c){return a.formatDigits(b,c||"00000")};a.formatTimestamp=function(a,b){var c,d={},f=void 0;b=b||"mm/dd/yyyy HH24:MM:SS.MS";if(!a)return"";var g=b.replace(/mm|dd|HH|MM|SS/g,function(a){return a.slice(Math.floor(a.length/-2))});if(c=e(g,!0,!0).exec(a)){g=g.match(/m|d|yyyy|yy|H|MS|M|S/g);c.shift();for(var k,h=0;k=c[h];h++)d[g[h]]=k}else{if(c=a.match(/^\D*(1[0-2]|0?[1-9])([\\/-]?)([12]\d|3[01]|0?[1-9])(\2)((?:19|20)?\d\d)\D*\b/))d.m=
c[1],d.d=c[3],d.yy=c[5];else if(c=a.match(/^\D*((?:19|20)?\d\d)([\\/-]?)(1[0-2]|0?[1-9])(\2)([12]\d|3[01]|0?[1-9])\D*\b/))d.yy=c[1],d.m=c[3],d.d=c[5];if(c&&(c=a.slice(c[0].length).match(/\b\D*(1\d|2[0-3]|0?\d)[\.:]?((?:0|[1-5])?\d)(?:[\.:]?((?:0|[1-5])?\d)(?:[\.:]?(\d{1,6})\d*)?)?\D*\b/)))d.H=c[1],d.M=c[2],d.S=c[3],d.MS=c[4];else if(c=a.match(/\b\D*(1\d|2[0-3]|0?\d)[\.:]?((?:0|[1-5])?\d)(?:[\.:]?((?:0|[1-5])?\d)(?:[\.:]?(\d{1,6})\d*)?)?\D*\b/))d.H=c[1],d.M=c[2],d.S=c[3],d.MS=c[4]}d.H&&1==(d.M||"").length&&
(d.M=d.H.slice(1)+d.M,d.H=d.H.slice(0,1));d.M&&(d.S=d.S||"0");d.S&&(d.MS=((d.MS||"")+"000000").slice(0,6));["m","d","H","M","S"].forEach(function(a){var b=d[a];b&&(d[a]=b.match(/^0*(\d+)$/)[1],d[a+a]=("00"+b).slice(-2))});d.yy&&(4==d.yy.length?(d.yyyy=d.yy,d.yy=d.yy.slice(-2)):d.yyyy=50>d.yy?"20"+d.yy:"19"+d.yy);d.H&&(c=parseInt(d.H)%12,a.match(/p(\.?m)?/i)?d.H24=d.HH24=((c+12)%24).toString():(d.H24=d.H,d.HH24=d.HH,d.H=c.toString(),d.HH=("0"+d.H).slice(-2)));return b.replace(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S/g,
function(a,b){if(d[a])return d[a];void 0===f&&(f=b);return""}).slice(0,f)||a};a.formatDate=function(b,c){return a.formatTimestamp(b,c||"mm/dd/yyyy")};a.formatTime=function(b,c){return a.formatTimestamp(b,c||"HH24:MM")};var b=function(a){a=a.match(/^([^\.]*)(\.?)([^\.]*)$/).slice(1);a[0]=a[0].replace(/\B(?=(?:\d{3})+\b)/g,",");return a.join("")},e=function(a,b,c){var d="",e="",f,g;if(c&&(f=a.match(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S/g)))for(d="(?:",c=0;c<f.length;c++)e+=")?";return new RegExp("^\\D*"+
a.replace(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S|.+?/g,function(a){return(g=A[a])?d+g:b?"\\D?":a.replace(/(\W)/g,"\\$1")})+e+"\\D*$")}};var r=function(a,b){var c=Array.prototype.slice.call(arguments,2);"string"===typeof a?a=document.querySelectorAll(a):a.nodeType&&(a=[a]);for(var f=0,g;g=a[f];f++)b.apply(null,[g].concat(c))},q=function(a){var b=parseInt(a.getAttribute("data-form-submit-id"));isNaN(b)&&a.setAttribute("data-form-submit-id",b=z++);return b},w=function(a){var c=a.currentTarget.querySelectorAll("[name]"),
e=!0,f=a.currentTarget.getAttribute("data-form-submit-always-allow");if(f&&"false"!=f.toLowerCase())return!0;for(var g,n=0;f=c[n];n++)if(g=b.getErrorMessage(f))b.displayErrorMessage(f,g),e&&(e=!1,f.focus());e||a.preventDefault();return e},t=function(a){var c;(c=b.getErrorMessage(a.currentTarget))?b.displayErrorMessage(a.currentTarget,c):b.removeErrorMessage(a.currentTarget)},k=function(a){var c=b.getCounterElement(a.currentTarget),e=a.currentTarget.getAttribute("data-form-submit-count");a.currentTarget.value=
a.currentTarget.value.slice(0,parseInt(e));c.textContent=a.currentTarget.value.length+"/"+e},p=function(a){return a.getAttribute("data-form-submit-error-msg")||"Invalid input"},h=function(a,c,e,f){b.addValidationSingleElement(a,function(a,b){return c(b.value=e(a,f),f)?"":p(b)})},l=function(a,c,e,f){b.addValidationSingleElement(a,function(a,b){return!c(b.value=e(a,f),f)&&b.value.length?p(b):""})},x=function(a,b){null===a.getAttribute("placeholder")&&a.setAttribute("placeholder",b)},y=function(a){var c,
e,f,g;a=document.querySelectorAll("[data-form-submit-required]");for(e=0;c=a[e];e++)if(f=c.getAttribute("data-form-submit-required"))switch(f=String(f).toLowerCase(),(g=v[f])&&x(c,g),f){case "digits":h(c,b.validation.isDigits,b.validation.formatDigits);break;case "number":h(c,b.validation.isNumber,b.validation.formatNumber);break;case "currency":h(c,b.validation.isCurrency,b.validation.formatCurrency);break;case "phone":h(c,b.validation.isPhone,b.validation.formatPhone);break;case "zip":h(c,b.validation.isZip,
b.validation.formatZip);break;case "email":b.addValidation(c,function(a,c){return b.validation.isEmail(a)?"":p(c)});break;case "timestamp":h(c,b.validation.isTimestamp,b.validation.formatTimestamp);break;case "date-mmddyyyy":h(c,b.validation.isDate,b.validation.formatDate);break;case "date-yyyymmdd":h(c,b.validation.isDate,b.validation.formatDate,"yyyy-mm-dd");break;case "time":h(c,b.validation.isTime,b.validation.formatTime);break;case "radio":b.addRadioValidation(c,function(a,b){var c;return void 0===
a?(c=b.form.querySelector('[name="'+b.name+'"][data-form-submit-error-msg]'))?c.getAttribute("data-form-submit-error-msg"):"Invalid input":""});break;case "false":break;default:b.addValidation(c,function(a,b){return a?"":p(b)})}a=document.querySelectorAll("[data-form-submit-optional]");for(e=0;c=a[e];e++)if(f=c.getAttribute("data-form-submit-optional"))switch(f=String(f).toLowerCase(),(g=v[f])&&x(c,g),f){case "digits":l(c,b.validation.isDigits,b.validation.formatDigits);break;case "number":l(c,b.validation.isNumber,
b.validation.formatNumber);break;case "currency":l(c,b.validation.isCurrency,b.validation.formatCurrency);break;case "phone":l(c,b.validation.isPhone,b.validation.formatPhone);break;case "zip":l(c,b.validation.isZip,b.validation.formatZip);break;case "email":b.addValidation(c,function(a,c){return!a||b.validation.isEmail(a)?"":p(c)});break;case "timestamp":l(c,b.validation.isTimestamp,b.validation.formatTimestamp);break;case "date-mmddyyyy":l(c,b.validation.isDate,b.validation.formatDate);break;case "date-yyyymmdd":l(c,
b.validation.isDate,b.validation.formatDate,"yyyy-mm-dd");break;case "time":l(c,b.validation.isTime,b.validation.formatTime);break;case "false":break;default:console.log("data-form-submit-optional invalid: "+c.getAttribute("data-form-submit-optional"))}a=document.querySelectorAll("[data-form-submit-regex]");for(e=0;c=a[e];e++)b.addValidation(c,function(a,b){try{var c=new RegExp("^"+b.getAttribute("data-form-submit-regex").match(/^\^*(.*?)\$*$/)[1]+"$")}catch(C){throw console.log("data-form-submit-regex invalid: "+
b.getAttribute("data-form-submit-regex")),C;}return c.test(a)?"":p(b)});a=document.querySelectorAll("[data-form-submit-count]");for(e=0;c=a[e];e++)g=c.getAttribute("data-form-submit-count"),"true"!=g&&isNaN(parseInt(g))&&console.log("data-form-submit-count invalid: "+c.getAttribute("data-form-submit-count")),b.addCounterSingleElement(c)};document.addEventListener("DOMContentLoaded",y,!0);"complete"==document.readyState&&y()};