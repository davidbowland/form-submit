/* Form Submission Validation (IE 9+) https://github.com/davidbowland/form-submit */"use strict";var formSubmit=new function(){var b=this,A=0,n={},v={},B={m:"(1[0-2]|0?[1-9])",mm:"(0[1-9]|1[0-2])",d:"([12]\\d|3[01]|0?[1-9])",dd:"(0[1-9]|[12]\\d|3[01])",yy:"(\\d\\d)",yyyy:"((?:19|20)\\d\\d)",H:"(1[0-2]|0?[1-9])",HH:"(0[1-9]|1[0-2])",H24:"(1\\d|2[0-3]|0?\\d)",HH24:"(0\\d|1\\d|2[0-3])",M:"((?:0|[1-5])?\\d)",MM:"([0-5]\\d)",S:"((?:0|[1-5])?\\d)",SS:"([0-5]\\d)",MS:"(\\d{0,6}?)"},C={0:"\\d",9:"[1-9]"},w={digits:"0",number:"0.0",currency:"0.00",phone:"(000)000-0000",zip:"00000",email:"user@domain.com",
timestamp:"mm/dd/yyyy hh:mm:ss.ms","date-mmddyyyy":"mm/dd/yyyy","date-yyyymmdd":"yyyy-mm-dd",time:"hh:mm"};b.addValidation=function(a,c){t(a,b.addValidationSingleElement,c);return b};b.addValidationSingleElement=function(a,c){b.removeValidationSingleElement(a);n[r(a)]=c;a.addEventListener("change",u);a.addEventListener("blur",u);var d=a.form;d in v||!d||(v[r(d)]=!0,d.addEventListener("submit",x));return b};b.removeValidation=function(a){t(a,b.removeValidationSingleElement);return b};b.removeValidationSingleElement=
function(a){a.removeEventListener("change",u);a.removeEventListener("blur",u);delete n[r(a)];a:{var c=a.form,d;if(c){for(d in n){var e=n[d];if(e.form==c)break a}c.removeEventListener("submit",x);delete v[r(c)]}}b.removeErrorMessage(a);return b};b.addRadioValidation=function(a,c){for(var d=a.form.querySelectorAll('[name="'+a.name+'"]'),e,g=0;e=d[g];g++)b.addValidationSingleElement(e,c);return b};b.removeRadioValidation=function(a,c){for(var d=a.form.querySelectorAll('[name="'+a.name+'"]'),e,g=0;e=
d[g];g++)b.removeValidationSingleElement(e,c);return b};b.getErrorMessage=function(a){var c=n[r(a)],b=a.value,e,g=a.type.toLowerCase();"radio"==g?b=(e=a.form.querySelector('[name="'+a.name+'"]:checked'))?e.value:void 0:"checkbox"==g?b=a.checked:"SELECT"==a.tagName.toUpperCase()&&(b=a.querySelector(":checked").value);if(c)return c(b,a)};b.isValid=function(a){return!b.getErrorMessage(a)};b.displayErrorMessage=function(a,c){b.removeErrorMessage(a);b.getErrorMessageElement(a).textContent=c;return b};
b.removeErrorMessage=function(a){b.getErrorMessageElement(a).textContent="";return b};b.getErrorMessageElement=function(a){var b=document.querySelector('[data-form-submit-error-for="'+(a.getAttribute("data-form-submit-group")||a.id||a.name)+'"]');if(!b){b=document.createElement("span");b.className="form-submit-error";b.setAttribute("data-form-submit-error-for",a.id||a.name);if("radio"==a.type.toLowerCase()){var d=a.form.querySelectorAll('[name="'+a.name+'"]');d=d[d.length-1].nextElementSibling}else d=
a.nextElementSibling;a.parentElement.insertBefore(b,d)}return b};b.addCounter=function(a,c){t(a,b.addCounterSingleElement,c);return b};b.addCounterSingleElement=function(a,c){b.removeCounterSingleElement(a);void 0!==c?a.setAttribute("data-form-submit-count",c):isNaN(parseInt(a.getAttribute("data-form-submit-count")))&&a.setAttribute("data-form-submit-count",a.getAttribute("maxlength"));a.addEventListener("input",k);a.addEventListener("keypress",k);a.addEventListener("change",k);a.addEventListener("blur",
k);k({currentTarget:a});return b};b.removeCounter=function(a){t(a,b.removeCounterSingleElement);return b};b.removeCounterSingleElement=function(a){a.removeEventListener("input",k);a.removeEventListener("keypress",k);a.removeEventListener("change",k);a.removeEventListener("blur",k);b.getCounterElement(a).textContent="";return b};b.getCounterElement=function(a){var b=document.querySelector('[data-form-submit-counter-for="'+(a.getAttribute("data-form-submit-group")||a.id||a.name)+'"]');b||(b=document.createElement("span"),
b.className="form-submit-counter",b.setAttribute("data-form-submit-counter-for",a.id||a.name),a.parentElement.insertBefore(b,a.nextSibling));return b};b.unload=function(){var a,c,d=document.querySelectorAll("data-form-submit-count");for(c in n)b.removeValidation(n[c]);for(c=0;a=d[c];c++)b.removeCounter(a);return b};b.validation=new function(){var a=this;a.isDigits=function(a){return 0<=a.search(/^\d+$/)};a.isNumber=function(a){return 0<=a.search(/^\-?((\d{1,3}(,?\d{3})*)\.?\d*|(\d{1,3}(,?\d{3})*)?\.\d+)$/)};
a.isCurrency=function(a){return 0<=a.search(/^\-?((\d{1,3}(,?\d{3})*)?\.\d\d)$/)};a.isPhone=function(a,b,c){b=(b||"(000)000-0000").replace(/0|9|.+?/g,function(a){return C[a]||(c?"\\D*?":a.replace(/(\W)/g,"\\$1"))});return(new RegExp("^"+b+"$")).test(a)};a.isZip=function(a){return 0<=a.search(/^\d{5}$/)};a.isEmail=function(a){return 0<=a.search(/^.+@([a-z0-9]([a-z0-9-]*[a-z0-9])*\.)+[a-z]+$/i)};a.isTimestamp=function(a,b,c){return d(b||"mm/dd/yyyy HH:MM:SS.MS",c).test(a)};a.isDate=function(b,c,p){return a.isTimestamp(b,
c||"mm/dd/yyyy",p)};a.isTime=function(b,c,p){return a.isTimestamp(b,c||"HH24:MM",p)};a.formatDigits=function(a,b){var c=a.match(/\d/g)||[],e;return void 0!==b&&a?b.replace(/\d/g,function(a,b){if(c.length)return c.shift();void 0===e&&(e=b);return""}).slice(0,e):c.join("")};a.formatNumber=function(a){var c=0,e=0<=a.indexOf("-")?"-":"";return b(e+a.replace(/\D/g,function(a){return"."==a&&1==++c?".":""}))};a.formatCurrency=function(c){return(c=a.formatNumber(c))?b(parseFloat(c.replace(/,/g,"")).toFixed(2)):
c};a.formatPhone=function(b,c){return a.formatDigits(b,c||"(000)000-0000")};a.formatZip=function(b,c){return a.formatDigits(b,c||"00000")};a.formatTimestamp=function(a,b){var c,f={MS:"000000",SS:"00"},e=void 0;b=b||"mm/dd/yyyy HH24:MM:SS.MS";if(!a)return"";if(c=d(b.replace(/mm|dd|HH|MM|SS/g,function(a){return a.slice(Math.floor(a.length/-2))}),!0,!0).exec(a)){var g=b.match(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S/g);c.shift();for(var l,k,h=0;l=c[h];h++)0<=["M","MM"].indexOf(g[h])&&1==l.length&&
(k=f.HH24||f.HH)&&(l=k.slice(1)+l,f.HH24=f.HH="0"+k.substr(0,1)),0<="mm dd HH24 HH MM SS".split(" ").indexOf(g[h])?l=("00"+l).slice(-2):"MS"==g[h]&&(l=(l+"000000").substr(0,6)),f[g[h]]=l}else{if(c=a.match(/(?:^|\D)(1[0-2]|0?[1-9])([\\/-]?)([12]\d|3[01]|0?[1-9])(\2)((?:19|20)?\d\d)/))f.m=c[1],f.d=c[3],f.yy=c[5];else if(c=a.match(/(?:^|\D)((?:19|20)?\d\d)([\\/-]?)(1[0-2]|0?[1-9])(\2)([12]\d|3[01]|0?[1-9])/))f.yy=c[1],f.m=c[3],f.d=c[5];if(c&&(c=a.slice(c[0].length).match(/(?:^|\D)(1\d|2[0-3]|0?\d)[\.:]?((?:0|[1-5])?\d)(?:[\.:]?((?:0|[1-5])?\d)(?:[\.:]?(\d{1,6}))?)?/)))f.H=
c[1],f.M=c[2],f.S=c[3]||"0",f.MS=c[4]||"000000";else if(c=a.match(/(?:^|\D)(1\d|2[0-3]|0?\d)[\.:]?((?:0|[1-5])?\d)(?:[\.:]?((?:0|[1-5])?\d)(?:[\.:]?(\d{1,6}))?)?/))f.H=c[1],f.M=c[2],f.S=c[3]||"0",f.MS=c[4]||"000000"}["m","d","H","M","S"].forEach(function(a){var b=f[a];b&&(f[a]=b.match(/^0*(\d+)$/)[1],f[a+a]=("0"+b).slice(-2))});f.yy&&(4==f.yy.length?(f.yyyy=f.yy,f.yy=f.yy.slice(-2)):f.yyyy=50>f.yy?"20"+f.yy:"19"+f.yy);f.H&&(a.match(/p(\.?m)?/i)?f.H24=f.HH24=(parseInt(f.H)+12).toString():(f.H24=f.H,
f.HH24=f.HH));return b.replace(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S/g,function(a,b){if(f[a])return f[a];void 0===e&&(e=b);return""}).slice(0,e)||a};a.formatDate=function(b,c){return a.formatTimestamp(b,c||"mm/dd/yyyy")};a.formatTime=function(b,c){return a.formatTimestamp(b,c||"HH24:MM")};var b=function(a){a=a.match(/^([^\.]*)(\.?)([^\.]*)$/).slice(1);a[0]=a[0].replace(/\B(?=(?:\d{3})+\b)/g,",");return a.join("")},d=function(a,b,c){var f="",d="",e,g;if(c&&(e=a.match(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S/g)))for(f=
"(?:",c=0;c<e.length;c++)d+=")?";return new RegExp("^"+a.replace(/mm|m|dd|d|yyyy|yy|HH24|H24|HH|H|MS|MM|M|SS|S|.+?/g,function(a){return(g=B[a])?f+g:b?"\\D?":a.replace(/(\W)/g,"\\$1")})+d+"$")}};var t=function(a,b){var c=Array.prototype.slice.call(arguments,2);"string"===typeof a?a=document.querySelectorAll(a):a.nodeType&&(a=[a]);for(var e=0,g;g=a[e];e++)b.apply(null,[g].concat(c))},r=function(a){var b=parseInt(a.getAttribute("data-form-submit-id"));isNaN(b)&&a.setAttribute("data-form-submit-id",b=
A++);return b},x=function(a){var c=a.currentTarget.querySelectorAll("[name]"),d=!0,e=a.currentTarget.getAttribute("data-form-submit-always-allow");if(e&&"false"!=e.toLowerCase())return!0;for(var g,p=0;e=c[p];p++)if(g=b.getErrorMessage(e))b.displayErrorMessage(e,g),d&&(d=!1,e.focus());d||a.preventDefault();return d},u=function(a){var c;(c=b.getErrorMessage(a.currentTarget))?b.displayErrorMessage(a.currentTarget,c):b.removeErrorMessage(a.currentTarget)},k=function(a){var c=b.getCounterElement(a.currentTarget),
d=a.currentTarget.getAttribute("data-form-submit-count");a.currentTarget.value=a.currentTarget.value.slice(0,parseInt(d));c.textContent=a.currentTarget.value.length+"/"+d},q=function(a){return a.getAttribute("data-form-submit-error-msg")||"Invalid input"},h=function(a,c,d,e){b.addValidationSingleElement(a,function(a,b){return c(b.value=d(a,e),e)?"":q(b)})},m=function(a,c,d,e){b.addValidationSingleElement(a,function(a,b){return!c(b.value=d(a,e),e)&&b.value.length?q(b):""})},y=function(a,b){null===
a.getAttribute("placeholder")&&a.setAttribute("placeholder",b)},z=function(a){var c,d,e,g;a=document.querySelectorAll("[data-form-submit-required]");for(d=0;c=a[d];d++)if(e=c.getAttribute("data-form-submit-required"))switch(e=String(e).toLowerCase(),(g=w[e])&&y(c,g),e){case "digits":h(c,b.validation.isDigits,b.validation.formatDigits);break;case "number":h(c,b.validation.isNumber,b.validation.formatNumber);break;case "currency":h(c,b.validation.isCurrency,b.validation.formatCurrency);break;case "phone":h(c,
b.validation.isPhone,b.validation.formatPhone);break;case "zip":h(c,b.validation.isZip,b.validation.formatZip);break;case "email":b.addValidation(c,function(a,c){return b.validation.isEmail(a)?"":q(c)});break;case "timestamp":h(c,b.validation.isTimestamp,b.validation.formatTimestamp);break;case "date-mmddyyyy":h(c,b.validation.isDate,b.validation.formatDate);break;case "date-yyyymmdd":h(c,b.validation.isDate,b.validation.formatDate,"yyyy-mm-dd");break;case "time":h(c,b.validation.isTime,b.validation.formatTime);
break;case "radio":b.addRadioValidation(c,function(a,b){var c;return void 0===a?(c=b.form.querySelector('[name="'+b.name+'"][data-form-submit-error-msg]'))?c.getAttribute("data-form-submit-error-msg"):"Invalid input":""});break;case "false":break;default:b.addValidation(c,function(a,b){return a?"":q(b)})}a=document.querySelectorAll("[data-form-submit-optional]");for(d=0;c=a[d];d++)if(e=c.getAttribute("data-form-submit-optional"))switch(e=String(e).toLowerCase(),(g=w[e])&&y(c,g),e){case "digits":m(c,
b.validation.isDigits,b.validation.formatDigits);break;case "number":m(c,b.validation.isNumber,b.validation.formatNumber);break;case "currency":m(c,b.validation.isCurrency,b.validation.formatCurrency);break;case "phone":m(c,b.validation.isPhone,b.validation.formatPhone);break;case "zip":m(c,b.validation.isZip,b.validation.formatZip);break;case "email":b.addValidation(c,function(a,c){return!a||b.validation.isEmail(a)?"":q(c)});break;case "timestamp":m(c,b.validation.isTimestamp,b.validation.formatTimestamp);
break;case "date-mmddyyyy":m(c,b.validation.isDate,b.validation.formatDate);break;case "date-yyyymmdd":m(c,b.validation.isDate,b.validation.formatDate,"yyyy-mm-dd");break;case "time":m(c,b.validation.isTime,b.validation.formatTime);break;case "false":break;default:console.log("data-form-submit-optional invalid: "+c.getAttribute("data-form-submit-optional"))}a=document.querySelectorAll("[data-form-submit-regex]");for(d=0;c=a[d];d++)b.addValidation(c,function(a,b){try{var c=new RegExp("^"+b.getAttribute("data-form-submit-regex").match(/^\^*(.*?)\$*$/)[1]+
"$")}catch(D){throw console.log("data-form-submit-regex invalid: "+b.getAttribute("data-form-submit-regex")),D;}return c.test(a)?"":q(b)});a=document.querySelectorAll("[data-form-submit-count]");for(d=0;c=a[d];d++)g=c.getAttribute("data-form-submit-count"),"true"!=g&&isNaN(parseInt(g))&&console.log("data-form-submit-count invalid: "+c.getAttribute("data-form-submit-count")),b.addCounterSingleElement(c)};document.addEventListener("DOMContentLoaded",z,!0);"complete"==document.readyState&&z()};